"use strict";var textToEdit,addItemBtn=document.querySelector(".add-item-btn"),textInput=document.querySelector(".text-input"),accordion=document.querySelector(".accordion"),listItemTemp=document.querySelector(".list-item-temp"),alertInfo=document.querySelector(".alert-info"),manageCategoryBtn=document.querySelector(".manage-category-btn"),editItemPopup=document.querySelector(".edit-task-popup"),editItemInput=document.querySelector(".edit-input"),editItemErrMsg=document.querySelector(".edit-error-msg"),editItemBtnAccept=document.querySelector(".edit-button-accept"),editItemBtnCancel=document.querySelector(".edit-button-cancel"),manageCategoryPopup=document.querySelector(".manage-category-popup"),manageCategoryTemplate=document.querySelector(".categories-list-item-template"),manageCategoryList=document.querySelector(".categories-list"),manageCategoryInfo=document.querySelector(".manage-category-info"),createCategoryBtn=document.querySelector(".add-category-btn"),manageCategoryCloseBtn=document.querySelector(".close-category-btn"),categorySelect=document.querySelector(".category-select"),editCategoryPopup=document.querySelector(".edit-category-popup"),editCategoryInput=document.querySelector(".edit-category-input"),editCategoryErrMsg=document.querySelector(".edit-category-error-msg"),editCategoryAcceptBtn=document.querySelector(".edit-category-accept"),editCategoryCancelBtn=document.querySelector(".edit-category-cancel"),createCategoryPopup=document.querySelector(".create-category-popup"),createCategoryErrMsg=document.querySelector(".create-category-error-msg"),createCategoryBtnAccept=document.querySelector(".create-category-accept"),createCategoryBtnCancel=document.querySelector(".create-category-cancel"),createCategoryInput=document.querySelector(".create-category-input"),itemIdNumber=0,addItem=function(){var e,t,o,a,r,n,c,i=listItemTemp.content.cloneNode(!0);""!==textInput.value?(e=(c=categorySelect.value)[0].toUpperCase()+c.slice(1),n=accordion.querySelector("#".concat(c)),itemIdNumber++,alertInfo.textContent="",n?n.id==c&&(n=n.querySelector(".acc-list"),a=(r=i.querySelector(".list-item")).querySelector(".text-content"),o=(t=n.previousElementSibling).querySelector(".category-todo-number").textContent,o++,t.querySelector(".category-todo-number").textContent=o,r.setAttribute("id","item-".concat(itemIdNumber)),a.textContent=textInput.value,textInput.value="",addBtnsAndListeners(r),n.appendChild(r),n.classList.remove("hide"),n.previousElementSibling.querySelector(".category-arrow").classList.remove("rotate")):((t=i.querySelector(".acc-box")).setAttribute("id","".concat(c)),o=t.querySelector(".category-todo-title-btn"),a=t.querySelector(".category-todo-text"),r=t.querySelector(".category-todo-number"),c=(n=i.querySelector(".list-item")).querySelector(".text-content"),o.addEventListener("click",toggleAccordion),a.textContent=e,r.textContent="1",n.setAttribute("id","item-".concat(itemIdNumber)),c.textContent=textInput.value,textInput.value="",addBtnsAndListeners(n),accordion.appendChild(t))):alertInfo.textContent="Write something to do!"},addBtnsAndListeners=function(e){var t=e.querySelector(".button-check"),o=e.querySelector(".button-edit"),e=e.querySelector(".button-delete");t.addEventListener("click",checkItem),o.addEventListener("click",editItem),e.addEventListener("click",deleteItem),e.addEventListener("click",checkIfAnyItemLeft)},enterKeyAddItem=function(){13===event.keyCode&&addItem()},checkItem=function(e){var e=e.target.closest(".button-check"),t=e.nextElementSibling,e=e.closest(".list-item");!1===t.disabled?(t.disabled=!0,e.classList.add("completed")):(t.disabled=!1,e.classList.remove("completed"))},editItem=function(e){e=e.target.closest(".button-edit").closest(".list-item");textToEdit=e.querySelector(".text-content"),editItemPopup.closest(".popup").classList.add("display-block"),editItemInput.value=textToEdit.textContent},deleteItem=function(e){var t=e.target.closest(".acc-box"),e=e.target.closest(".button-delete"),o=t.querySelector(".category-todo-number").textContent;e.closest(".list-item").remove(),editItemInput.value="",o--,0==(t.querySelector(".category-todo-number").textContent=o)&&t.remove()},acceptEditedText=function(){textToEdit.textContent=editItemInput.value,editItemPopup.closest(".popup").classList.remove("display-block"),textToEdit.textContent=editItemInput.value,editItemErrMsg.textContent="",editItemInput.style.border="none"},enterKeyEditItem=function(){13===event.keyCode&&acceptEditedText()},checkEditItemInput=function(){textToEdit.textContent===editItemInput.value?(editItemInput.style.border="2px solid red",editItemErrMsg.textContent="Please, change something!"):acceptEditedText()},cancelEditedText=function(){editItemPopup.closest(".popup").classList.remove("display-block"),editItemInput.value="",editItemErrMsg.textContent="",editItemInput.style.border="none"},showMeManageCategoryPopup=function(){document.querySelectorAll(".category-option").forEach(function(e){createLi(e)}),manageCategoryPopup.closest(".popup").classList.add("display-block")},createLi=function(e){var t=manageCategoryTemplate.content.cloneNode(!0).querySelector(".categories-list-item"),o=t.querySelector(".categories-list-item-text"),e=e.textContent,a=t.querySelector(".category-edit-button"),r=t.querySelector(".category-delete-button");a.addEventListener("click",editCategory),r.addEventListener("click",deleteCategory),o.textContent=e,manageCategoryList.appendChild(t)},editCategory=function(e){var e=e.target.closest(".category-edit-button").closest(".categories-list-item"),e=(textToEdit=e.querySelector(".categories-list-item-text")).textContent.toLowerCase(),t=document.querySelectorAll(".category-todo-text"),o=[];t.forEach(function(e){o.push(e.textContent.toLowerCase())}),o.includes(e)?(manageCategoryInfo.textContent="You are using this one!",manageCategoryInfo.classList.add("display-block")):(editCategoryInput.value=textToEdit.textContent,editCategoryPopup.closest(".popup").classList.add("display-block"),manageCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryInfo.classList.remove("display-block"))},checkEditCategoryInput=function(){var e=editCategoryInput.value,t=e.toLowerCase(),o=document.querySelectorAll(".categories-list-item-text"),a=[];o.forEach(function(e){a.push(e.textContent.toLowerCase())}),""===e?editCategoryErrMsg.textContent="Please, write something!":a.includes(t)?editCategoryErrMsg.textContent="Please, write new category!":acceptEditCategoryInput()},enterKeyEditCategory=function(){13===event.keyCode&&checkEditCategoryInput()},acceptEditCategoryInput=function(){var e=textToEdit.textContent.toLowerCase(),e=document.querySelector(".category-option[value = ".concat(e,"]"));e.value=editCategoryInput.value.toLowerCase(),e.textContent=editCategoryInput.value.charAt(0).toUpperCase()+editCategoryInput.value.slice(1),textToEdit.textContent=editCategoryInput.value.charAt(0).toUpperCase()+editCategoryInput.value.slice(1),editCategoryInput.value="",editCategoryErrMsg.textContent="",editCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryPopup.closest(".popup").classList.add("display-block")},closeEditCategoryPopup=function(){editCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryPopup.closest(".popup").classList.add("display-block"),editCategoryInput.value="",editCategoryErrMsg.textContent=""},deleteCategory=function(e){var t=e.target.closest(".category-delete-button").closest(".categories-list-item"),o=t.querySelector(".categories-list-item-text").textContent.toLowerCase(),e=document.querySelectorAll(".category-todo-text"),a=document.querySelectorAll(".category-option"),r=[];0<e.length?(e.forEach(function(e){e=e.textContent.toLowerCase();r.push(e)}),r.includes(o)?(manageCategoryInfo.textContent="You are using this category!",manageCategoryInfo.classList.add("display-block")):a.forEach(function(e){1<a.length?e.value===o&&(t.remove(),e.remove(),manageCategoryInfo.classList.remove("display-block")):(manageCategoryInfo.textContent="You need at least one category!",manageCategoryInfo.classList.add("display-block"))})):a.forEach(function(e){1<a.length?e.value===o&&(t.remove(),e.remove(),manageCategoryInfo.classList.remove("display-block")):(manageCategoryInfo.textContent="You need at least one category!",manageCategoryInfo.classList.add("display-block"))})},closeCategoryPopup=function(){document.querySelectorAll(".categories-list-item")&&document.querySelectorAll(".categories-list-item").forEach(function(e){e.remove()}),manageCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryInfo.classList.remove("display-block")},showMecreateCategoryPopup=function(){createCategoryPopup.closest(".popup").classList.add("display-block"),manageCategoryInfo.classList.remove("display-block"),closeCategoryPopup()},acceptNewCategory=function(){var e=document.createElement("option");e.value=createCategoryInput.value.toLowerCase(),e.textContent=createCategoryInput.value.charAt(0).toUpperCase()+createCategoryInput.value.slice(1),e.classList.add("category-option"),categorySelect.append(e),createCategoryPopup.closest(".popup").classList.remove("display-block"),createCategoryInput.value="",createCategoryErrMsg.textContent=""},checkCategoryInput=function(){var e=createCategoryInput.value.toLowerCase(),t=document.querySelectorAll(".category-option"),o=[];t.forEach(function(e){o.push(e.value)}),""===createCategoryInput.value?createCategoryErrMsg.textContent="Please, write something!":o.includes(e)?createCategoryErrMsg.textContent="You already have this one!":(acceptNewCategory(),showMeManageCategoryPopup())},enterKeyAddCategory=function(){13===event.keyCode&&checkCategoryInput()},cancelNewCategory=function(){createCategoryPopup.closest(".popup").classList.remove("display-block"),createCategoryInput.value="",createCategoryErrMsg.textContent="",showMeManageCategoryPopup()},checkIfAnyItemLeft=function(){accordion.querySelector(".acc-box")?alertInfo.textContent="":alertInfo.textContent="For now there is nothing to do."},toggleAccordion=function(e){var e=e.target.closest(".category-todo-title-btn"),t=e.querySelector(".category-arrow");e.nextElementSibling.classList.toggle("hide"),t.classList.toggle("rotate")};addItemBtn.addEventListener("click",addItem),textInput.addEventListener("keyup",enterKeyAddItem),editItemBtnAccept.addEventListener("click",checkEditItemInput),editItemInput.addEventListener("keyup",enterKeyEditItem),editItemBtnCancel.addEventListener("click",cancelEditedText),manageCategoryBtn.addEventListener("click",showMeManageCategoryPopup),manageCategoryCloseBtn.addEventListener("click",closeCategoryPopup),editCategoryInput.addEventListener("keyup",enterKeyEditCategory),editCategoryAcceptBtn.addEventListener("click",checkEditCategoryInput),editCategoryCancelBtn.addEventListener("click",closeEditCategoryPopup),createCategoryBtn.addEventListener("click",showMecreateCategoryPopup),createCategoryBtnAccept.addEventListener("click",checkCategoryInput),createCategoryInput.addEventListener("keyup",enterKeyAddCategory),createCategoryBtnCancel.addEventListener("click",cancelNewCategory);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG8uanMiXSwibmFtZXMiOlsidGV4dFRvRWRpdCIsImFkZEl0ZW1CdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0SW5wdXQiLCJhY2NvcmRpb24iLCJsaXN0SXRlbVRlbXAiLCJtYW5hZ2VDYXRlZ29yeUJ0biIsImVkaXRJdGVtUG9wdXAiLCJlZGl0SXRlbUlucHV0IiwiZWRpdEl0ZW1FcnJNc2ciLCJlZGl0SXRlbUJ0bkFjY2VwdCIsIm1hbmFnZUNhdGVnb3J5UG9wdXAiLCJtYW5hZ2VDYXRlZ29yeVRlbXBsYXRlIiwibWFuYWdlQ2F0ZWdvcnlMaXN0IiwibWFuYWdlQ2F0ZWdvcnlJbmZvIiwiY3JlYXRlQ2F0ZWdvcnlCdG4iLCJtYW5hZ2VDYXRlZ29yeUNsb3NlQnRuIiwiZWRpdENhdGVnb3J5UG9wdXAiLCJlZGl0Q2F0ZWdvcnlFcnJNc2ciLCJlZGl0Q2F0ZWdvcnlBY2NlcHRCdG4iLCJlZGl0Q2F0ZWdvcnlDYW5jZWxCdG4iLCJjcmVhdGVDYXRlZ29yeVBvcHVwIiwiY3JlYXRlQ2F0ZWdvcnlFcnJNc2ciLCJjcmVhdGVDYXRlZ29yeUJ0bkNhbmNlbCIsImNyZWF0ZUNhdGVnb3J5SW5wdXQiLCJpdGVtSWROdW1iZXIiLCJ2YWx1ZSIsImFkZEl0ZW0iLCJjYXRlZ29yeVRpdGxlVXBwZXJDYXNlIiwiYWNjTGlzdCIsImFjY0JveCIsImFjY29yZGlvbkJ1dHRvbiIsInRleHRDb250ZW50IiwiYWRkQnRuc0FuZExpc3RlbmVycyIsImFwcGVuZENoaWxkIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhdGVnb3J5VmFsdWUiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiYWNjTnVtYmVyIiwiaWQiLCJpdGVtIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFjY0J0biIsInNldEF0dHJpYnV0ZSIsImxpc3RJdGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZUFjY29yZGlvbiIsImFsZXJ0SW5mbyIsIm51bWJlciIsImNvbmNhdCIsImJ0bkNoZWNrSXRlbSIsImVsIiwiYnRuRGVsZXRlSXRlbSIsImJ0bkVkaXRJdGVtIiwiY2hlY2tJdGVtIiwiY2hlY2tCdG4iLCJuZXh0RWxlbWVudFNpYmxpbmciLCJlZGl0SXRlbSIsImRlbGV0ZUl0ZW0iLCJkaXNhYmxlZCIsImNoZWNrSWZBbnlJdGVtTGVmdCIsImVudGVyS2V5QWRkSXRlbSIsImVkaXRCdG4iLCJlIiwidGFyZ2V0IiwiY2xvc2VzdCIsImFkZCIsImRlbGV0ZUJ0biIsImFjY2VwdEVkaXRlZFRleHQiLCJzdHlsZSIsImJvcmRlciIsImNhbmNlbEVkaXRlZFRleHQiLCJjaGVja0VkaXRJdGVtSW5wdXQiLCJzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwIiwiY2F0ZWdvcnlPcHRpb25zIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJjcmVhdGVMaSIsInRlbXBsYXRlIiwiY2F0ZWdvcnlUaXRsZXMiLCJwdXNoIiwidG9Mb3dlckNhc2UiLCJ0ZXh0IiwiaW5jbHVkZXMiLCJ0ZXh0VmFsdWVMb3dlckNhc2UiLCJuZXdMaSIsImVkaXRDYXRlZ29yeSIsImVkaXRDYXRlZ29yeUlucHV0IiwiZGVsZXRlQ2F0ZWdvcnkiLCJjaGVja0VkaXRDYXRlZ29yeUlucHV0IiwiaW5wdXRWYWx1ZSIsImlucHV0VmFsdWVUb0xvd2VyQ2FzZSIsInRpdGxlIiwiYWNjZXB0RWRpdENhdGVnb3J5SW5wdXQiLCJldmVudCIsIm9wdGlvbiIsImNsb3NlRWRpdENhdGVnb3J5UG9wdXAiLCJjbG9zZXN0TGkiLCJlbnRlcktleUVkaXRDYXRlZ29yeSIsInRpdGxlVG9Mb3dlciIsImFyciIsImtleUNvZGUiLCJ0ZXh0VmFsdWUiLCJjaGFyQXQiLCJsZW5ndGgiLCJwYXJhZ3JhcGhWYWx1ZSIsIml0ZW1zVGl0bGVzIiwiY2xvc2VDYXRlZ29yeVBvcHVwIiwibmV3Q2F0ZWdvcnlPcHRpb24iLCJjYXRlZ29yeUlucHV0VG9Mb3dlckNhc2UiLCJsaSIsImFjY29yZGlvbkJveCIsImNhdGVnb3J5QXJyb3ciLCJjcmVhdGVFbGVtZW50IiwiZW50ZXJLZXlFZGl0SXRlbSIsImVkaXRJdGVtQnRuQ2FuY2VsIiwic2hvd01lY3JlYXRlQ2F0ZWdvcnlQb3B1cCIsImNyZWF0ZUNhdGVnb3J5QnRuQWNjZXB0IiwiY2hlY2tDYXRlZ29yeUlucHV0IiwiYWNjZXB0TmV3Q2F0ZWdvcnkiLCJlbnRlcktleUFkZENhdGVnb3J5IiwiY2FuY2VsTmV3Q2F0ZWdvcnkiLCJhY2NvcmRpb25CdG4iLCJ0b2dnbGUiXSwibWFwcGluZ3MiOiJhQUFBLElBd0NJQSxXQXhDRUMsV0FBYUMsU0FBU0MsY0FBYyxpQkFDcENDLFVBQVlGLFNBQVNDLGNBQWMsZUFEbkNGLFVBQWFDLFNBQVNDLGNBQWMsY0FDcENDLGFBQVlGLFNBQVNDLGNBQWMsbUJBQ25DRSxVQUFZSCxTQUFTQyxjQUFjLGVBQ25DRyxrQkFBZUosU0FBU0MsY0FBYyx3QkFFdENJLGNBQWlCTCxTQUFHQSxjQUFTQyxvQkFFN0JLLGNBQWdCTixTQUFTQyxjQUFjLGVBQ3ZDTSxlQUFnQlAsU0FBU0MsY0FBYyxtQkFDdkNPLGtCQUFpQlIsU0FBU0MsY0FBYyx1QkFDeENRLGtCQUFvQlQsU0FBU0MsY0FBYyx1QkFHM0NTLG9CQUFzQlYsU0FBU0MsY0FBYywwQkFDN0NVLHVCQUF5QlgsU0FBU0MsY0FBYyxrQ0FDaERXLG1CQUFxQlosU0FBU0MsY0FBYyxvQkFDNUNZLG1CQUFxQmIsU0FBU0MsY0FBYyx5QkFDNUNhLGtCQUFvQmQsU0FBU0MsY0FBYyxxQkFDM0NjLHVCQUF5QmYsU0FBU0MsY0FBYyx1QkFJaERlLGVBQWlCaEIsU0FBV0MsY0FBUixvQkFFcEJnQixrQkFBcUJqQixTQUFTQyxjQUFjLHdCQUM1Q2lCLGtCQUFxQmxCLFNBQUdBLGNBQVNDLHdCQUNqQ2tCLG1CQUFxQm5CLFNBQVdDLGNBQVIsNEJBRXhCbUIsc0JBQXNCcEIsU0FBU0MsY0FBYyx5QkFDN0NvQixzQkFBdUJyQixTQUFTQyxjQUFjLHlCQUU5Q3FCLG9CQUF1QnRCLFNBQUdBLGNBQVND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LFFBQVNtRCx3QkFFaERyRixrQkFBa0JrQyxpQkFBaUIsUUFBU3VFLDJCQUM1Q0Msd0JBQXdCeEUsaUJBQWlCLFFBQVN5RSxvQkFDbERsRyxvQkFBb0J5QixpQkFBaUIsUUFBUzJFLHFCQUM5Q3JHLHdCQUF3QjBCLGlCQUFpQixRQUFTNEUiLCJmaWxlIjoidG9kby5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhZGRJdGVtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1pdGVtLWJ0bicpXHJcbmNvbnN0IHRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWlucHV0JylcclxuY29uc3QgYWNjb3JkaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbicpXHJcbmNvbnN0IGxpc3RJdGVtVGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0tdGVtcCcpXHJcbmNvbnN0IGFsZXJ0SW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC1pbmZvJylcclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFuYWdlLWNhdGVnb3J5LWJ0bicpXHJcblxyXG5jb25zdCBlZGl0SXRlbVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdGFzay1wb3B1cCcpXHJcbmNvbnN0IGVkaXRJdGVtSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1pbnB1dCcpXHJcbmNvbnN0IGVkaXRJdGVtRXJyTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtZXJyb3ItbXNnJylcclxuY29uc3QgZWRpdEl0ZW1CdG5BY2NlcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24tYWNjZXB0JylcclxuY29uc3QgZWRpdEl0ZW1CdG5DYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24tY2FuY2VsJylcclxuXHJcbmNvbnN0IG1hbmFnZUNhdGVnb3J5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFuYWdlLWNhdGVnb3J5LXBvcHVwJylcclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbS10ZW1wbGF0ZScpXHJcbmNvbnN0IG1hbmFnZUNhdGVnb3J5TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzLWxpc3QnKVxyXG5jb25zdCBtYW5hZ2VDYXRlZ29yeUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFuYWdlLWNhdGVnb3J5LWluZm8nKVxyXG5jb25zdCBjcmVhdGVDYXRlZ29yeUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtY2F0ZWdvcnktYnRuJylcclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1jYXRlZ29yeS1idG4nKVxyXG5cclxuY29uc3QgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktc2VsZWN0JylcclxuXHJcbmNvbnN0IGVkaXRDYXRlZ29yeVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2F0ZWdvcnktcG9wdXAnKVxyXG5jb25zdCBlZGl0Q2F0ZWdvcnlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWNhdGVnb3J5LWlucHV0JylcclxuY29uc3QgZWRpdENhdGVnb3J5RXJyTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2F0ZWdvcnktZXJyb3ItbXNnJylcclxuY29uc3QgZWRpdENhdGVnb3J5QWNjZXB0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2F0ZWdvcnktYWNjZXB0JylcclxuY29uc3QgZWRpdENhdGVnb3J5Q2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2F0ZWdvcnktY2FuY2VsJylcclxuXHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWNhdGVnb3J5LXBvcHVwJylcclxuY29uc3QgY3JlYXRlQ2F0ZWdvcnlFcnJNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWNhdGVnb3J5LWVycm9yLW1zZycpXHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5QnRuQWNjZXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1jYXRlZ29yeS1hY2NlcHQnKVxyXG5jb25zdCBjcmVhdGVDYXRlZ29yeUJ0bkNhbmNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtY2F0ZWdvcnktY2FuY2VsJylcclxuY29uc3QgY3JlYXRlQ2F0ZWdvcnlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtY2F0ZWdvcnktaW5wdXQnKVxyXG5cclxubGV0IHRleHRUb0VkaXRcclxuXHJcbmxldCBpdGVtSWROdW1iZXIgPSAwXHJcblxyXG5jb25zdCBhZGRJdGVtID0gKCkgPT4ge1xyXG5cclxuICAgIGxldCBsaXN0SXRlbSA9IGxpc3RJdGVtVGVtcC5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxyXG5cclxuICAgIGlmICh0ZXh0SW5wdXQudmFsdWUgIT09ICcnKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5VmFsdWUgPSBjYXRlZ29yeVNlbGVjdC52YWx1ZVxyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5VGl0bGVVcHBlckNhc2UgPSBjYXRlZ29yeVZhbHVlWzBdLnRvVXBwZXJDYXNlKCkgKyBjYXRlZ29yeVZhbHVlLnNsaWNlKDEpXHJcblxyXG4gICAgICAgIGxldCBhY2NCb3ggPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihgIyR7Y2F0ZWdvcnlWYWx1ZX1gKVxyXG5cclxuICAgICAgICBpdGVtSWROdW1iZXIrK1xyXG4gICAgICAgIGFsZXJ0SW5mby50ZXh0Q29udGVudCA9ICcnXHJcblxyXG4gICAgICAgIGlmIChhY2NCb3gpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChhY2NCb3guaWQgPT0gY2F0ZWdvcnlWYWx1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBhY2NMaXN0ID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5hY2MtbGlzdCcpXHJcbiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0nKVxyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRDb250ZW50ID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcudGV4dC1jb250ZW50JylcclxuICAgICAgICAgICAgICAgIGxldCBhY2NCdG4gPSBhY2NMaXN0LnByZXZpb3VzRWxlbWVudFNpYmxpbmdcclxuICAgICAgICAgICAgICAgIGxldCBhY2NOdW1iZXIgPSBhY2NCdG4ucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tbnVtYmVyJykudGV4dENvbnRlbnRcclxuICAgICAgICAgICAgICAgIGFjY051bWJlcisrXHJcblxyXG4gICAgICAgICAgICAgICAgYWNjQnRuLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLW51bWJlcicpLnRleHRDb250ZW50ID0gYWNjTnVtYmVyXHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgYGl0ZW0tJHtpdGVtSWROdW1iZXJ9YClcclxuICAgICAgICAgICAgICAgIHRleHRDb250ZW50LnRleHRDb250ZW50ID0gdGV4dElucHV0LnZhbHVlXHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJydcclxuXHJcbiAgICAgICAgICAgICAgICBhZGRCdG5zQW5kTGlzdGVuZXJzKGl0ZW0pXHJcblxyXG4gICAgICAgICAgICAgICAgYWNjTGlzdC5hcHBlbmRDaGlsZChpdGVtKVxyXG4gICAgICAgICAgICAgICAgYWNjTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcclxuICAgICAgICAgICAgICAgIGFjY0xpc3QucHJldmlvdXNFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktYXJyb3cnKS5jbGFzc0xpc3QucmVtb3ZlKCdyb3RhdGUnKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBhY2NCb3ggPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCcuYWNjLWJveCcpXHJcbiAgICAgICAgICAgIGFjY0JveC5zZXRBdHRyaWJ1dGUoJ2lkJywgYCR7Y2F0ZWdvcnlWYWx1ZX1gKVxyXG4gICAgICAgICAgICBsZXQgYWNjb3JkaW9uQnV0dG9uID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLXRpdGxlLWJ0bicpXHJcbiAgICAgICAgICAgIGxldCB0aXRsZSA9IGFjY0JveC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktdG9kby10ZXh0JylcclxuICAgICAgICAgICAgbGV0IG51bWJlciA9IGFjY0JveC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktdG9kby1udW1iZXInKVxyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0nKVxyXG4gICAgICAgICAgICBsZXQgdGV4dENvbnRlbnQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWNvbnRlbnQnKVxyXG5cclxuICAgICAgICAgICAgYWNjb3JkaW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQWNjb3JkaW9uKVxyXG4gICAgICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IGNhdGVnb3J5VGl0bGVVcHBlckNhc2VcclxuICAgICAgICAgICAgbnVtYmVyLnRleHRDb250ZW50ID0gJzEnXHJcbiAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdpZCcsIGBpdGVtLSR7aXRlbUlkTnVtYmVyfWApXHJcbiAgICAgICAgICAgIHRleHRDb250ZW50LnRleHRDb250ZW50ID0gdGV4dElucHV0LnZhbHVlXHJcblxyXG4gICAgICAgICAgICB0ZXh0SW5wdXQudmFsdWUgPSAnJ1xyXG5cclxuICAgICAgICAgICAgYWRkQnRuc0FuZExpc3RlbmVycyhpdGVtKVxyXG5cclxuICAgICAgICAgICAgYWNjb3JkaW9uLmFwcGVuZENoaWxkKGFjY0JveClcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydEluZm8udGV4dENvbnRlbnQgPSAnV3JpdGUgc29tZXRoaW5nIHRvIGRvISdcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgYWRkQnRuc0FuZExpc3RlbmVycyA9IChlbCkgPT4ge1xyXG4gICAgbGV0IGJ0bkNoZWNrSXRlbSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tY2hlY2snKVxyXG4gICAgbGV0IGJ0bkVkaXRJdGVtID0gZWwucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1lZGl0JylcclxuICAgIGxldCBidG5EZWxldGVJdGVtID0gZWwucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1kZWxldGUnKVxyXG5cclxuICAgIGJ0bkNoZWNrSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrSXRlbSlcclxuICAgIGJ0bkVkaXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdEl0ZW0pXHJcbiAgICBidG5EZWxldGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlSXRlbSlcclxuICAgIGJ0bkRlbGV0ZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0lmQW55SXRlbUxlZnQpXHJcbn1cclxuXHJcbmNvbnN0IGVudGVyS2V5QWRkSXRlbSA9ICgpID0+IHtcclxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgIGFkZEl0ZW0oKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjaGVja0l0ZW0gPSAoZSkgPT4ge1xyXG4gICAgbGV0IGNoZWNrQnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmJ1dHRvbi1jaGVjaycpXHJcbiAgICBsZXQgZWRpdEJ0biA9IGNoZWNrQnRuLm5leHRFbGVtZW50U2libGluZ1xyXG4gICAgbGV0IGxpc3RJdGVtID0gY2hlY2tCdG4uY2xvc2VzdCgnLmxpc3QtaXRlbScpXHJcblxyXG4gICAgaWYgKGVkaXRCdG4uZGlzYWJsZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgZWRpdEJ0bi5kaXNhYmxlZCA9IHRydWVcclxuICAgICAgICBsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBlZGl0QnRuLmRpc2FibGVkID0gZmFsc2VcclxuICAgICAgICBsaXN0SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBlZGl0SXRlbSA9IChlKSA9PiB7XHJcbiAgICBsZXQgZWRpdEJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5idXR0b24tZWRpdCcpXHJcbiAgICBsZXQgbGlzdEl0ZW0gPSBlZGl0QnRuLmNsb3Nlc3QoJy5saXN0LWl0ZW0nKVxyXG4gICAgdGV4dFRvRWRpdCA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWNvbnRlbnQnKVxyXG4gICAgZWRpdEl0ZW1Qb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIGVkaXRJdGVtSW5wdXQudmFsdWUgPSB0ZXh0VG9FZGl0LnRleHRDb250ZW50XHJcbn1cclxuXHJcbmNvbnN0IGRlbGV0ZUl0ZW0gPSAoZSkgPT4ge1xyXG4gICAgbGV0IGFjY0JveCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5hY2MtYm94JylcclxuICAgIGxldCBkZWxldGVCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuYnV0dG9uLWRlbGV0ZScpXHJcbiAgICBsZXQgbnVtYmVyID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLW51bWJlcicpLnRleHRDb250ZW50XHJcbiAgICBkZWxldGVCdG4uY2xvc2VzdCgnLmxpc3QtaXRlbScpLnJlbW92ZSgpXHJcbiAgICBlZGl0SXRlbUlucHV0LnZhbHVlID0gJydcclxuICAgIG51bWJlci0tXHJcbiAgICBhY2NCb3gucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tbnVtYmVyJykudGV4dENvbnRlbnQgPSBudW1iZXJcclxuXHJcbiAgICBpZiAobnVtYmVyID09PSAwKSB7XHJcbiAgICAgICAgYWNjQm94LnJlbW92ZSgpXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zdCBhY2NlcHRFZGl0ZWRUZXh0ID0gKCkgPT4ge1xyXG4gICAgdGV4dFRvRWRpdC50ZXh0Q29udGVudCA9IGVkaXRJdGVtSW5wdXQudmFsdWVcclxuICAgIGVkaXRJdGVtUG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICB0ZXh0VG9FZGl0LnRleHRDb250ZW50ID0gZWRpdEl0ZW1JbnB1dC52YWx1ZVxyXG4gICAgZWRpdEl0ZW1FcnJNc2cudGV4dENvbnRlbnQgPSAnJ1xyXG4gICAgZWRpdEl0ZW1JbnB1dC5zdHlsZS5ib3JkZXIgPSAnbm9uZSdcclxufVxyXG5cclxuY29uc3QgZW50ZXJLZXlFZGl0SXRlbSA9ICgpID0+IHtcclxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgIGFjY2VwdEVkaXRlZFRleHQoKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjaGVja0VkaXRJdGVtSW5wdXQgPSAoKSA9PiB7XHJcbiAgICBpZiAodGV4dFRvRWRpdC50ZXh0Q29udGVudCA9PT0gZWRpdEl0ZW1JbnB1dC52YWx1ZSkge1xyXG4gICAgICAgIGVkaXRJdGVtSW5wdXQuc3R5bGUuYm9yZGVyID0gJzJweCBzb2xpZCByZWQnXHJcbiAgICAgICAgZWRpdEl0ZW1FcnJNc2cudGV4dENvbnRlbnQgPSAnUGxlYXNlLCBjaGFuZ2Ugc29tZXRoaW5nISdcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWNjZXB0RWRpdGVkVGV4dCgpXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGNhbmNlbEVkaXRlZFRleHQgPSAoKSA9PiB7XHJcbiAgICBlZGl0SXRlbVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgZWRpdEl0ZW1JbnB1dC52YWx1ZSA9ICcnXHJcbiAgICBlZGl0SXRlbUVyck1zZy50ZXh0Q29udGVudCA9ICcnXHJcbiAgICBlZGl0SXRlbUlucHV0LnN0eWxlLmJvcmRlciA9ICdub25lJ1xyXG59XHJcblxyXG5jb25zdCBzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwID0gKCkgPT4ge1xyXG5cclxuICAgIGxldCBjYXRlZ29yeU9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcnktb3B0aW9uJylcclxuXHJcbiAgICBjYXRlZ29yeU9wdGlvbnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBjcmVhdGVMaShpdGVtKVxyXG4gICAgfSlcclxuXHJcbiAgICBtYW5hZ2VDYXRlZ29yeVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVMaSA9IChlbCkgPT4ge1xyXG4gICAgY29uc3QgdGVtcGxhdGUgPSBtYW5hZ2VDYXRlZ29yeVRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXHJcbiAgICBjb25zdCBuZXdMaSA9IHRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbScpXHJcbiAgICBjb25zdCB0ZXh0UGFyYWdyYXBoID0gbmV3TGkucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMtbGlzdC1pdGVtLXRleHQnKVxyXG4gICAgY29uc3QgdGV4dCA9IGVsLnRleHRDb250ZW50XHJcblxyXG4gICAgY29uc3QgZWRpdEJ0biA9IG5ld0xpLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS1lZGl0LWJ1dHRvbicpXHJcbiAgICBjb25zdCBkZWxldGVCdG4gPSBuZXdMaS5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktZGVsZXRlLWJ1dHRvbicpXHJcblxyXG4gICAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRDYXRlZ29yeSlcclxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUNhdGVnb3J5KVxyXG5cclxuICAgIHRleHRQYXJhZ3JhcGgudGV4dENvbnRlbnQgPSB0ZXh0XHJcbiAgICBtYW5hZ2VDYXRlZ29yeUxpc3QuYXBwZW5kQ2hpbGQobmV3TGkpXHJcbn1cclxuXHJcbmNvbnN0IGVkaXRDYXRlZ29yeSA9IChlKSA9PiB7XHJcbiAgICBjb25zdCBidG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuY2F0ZWdvcnktZWRpdC1idXR0b24nKVxyXG4gICAgY29uc3QgY2xvc2VzdExpID0gYnRuLmNsb3Nlc3QoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbScpXHJcbiAgICB0ZXh0VG9FZGl0ID0gY2xvc2VzdExpLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbS10ZXh0JylcclxuICAgIGNvbnN0IHRleHRWYWx1ZUxvd2VyQ2FzZSA9IHRleHRUb0VkaXQudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKVxyXG5cclxuICAgIGxldCBjYXRlZ29yeVRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yeS10b2RvLXRleHQnKVxyXG4gICAgbGV0IGFyciA9IFtdXHJcblxyXG4gICAgY2F0ZWdvcnlUaXRsZXMuZm9yRWFjaCh0aXRsZSA9PiB7XHJcbiAgICAgICAgYXJyLnB1c2godGl0bGUudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKSlcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGFyci5pbmNsdWRlcyh0ZXh0VmFsdWVMb3dlckNhc2UpKSB7XHJcblxyXG4gICAgICAgIG1hbmFnZUNhdGVnb3J5SW5mby50ZXh0Q29udGVudCA9ICdZb3UgYXJlIHVzaW5nIHRoaXMgb25lISdcclxuICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpXHJcbiAgICAgICAgXHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBlZGl0Q2F0ZWdvcnlJbnB1dC52YWx1ZSA9IHRleHRUb0VkaXQudGV4dENvbnRlbnRcclxuXHJcbiAgICAgICAgZWRpdENhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpXHJcbiAgICAgICAgbWFuYWdlQ2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zdCBjaGVja0VkaXRDYXRlZ29yeUlucHV0ID0gKCkgPT4ge1xyXG5cclxuICAgIGxldCBpbnB1dFZhbHVlID0gZWRpdENhdGVnb3J5SW5wdXQudmFsdWVcclxuICAgIGxldCBpbnB1dFZhbHVlVG9Mb3dlckNhc2UgPSBpbnB1dFZhbHVlLnRvTG93ZXJDYXNlKClcclxuICAgIGxldCBjYXRlZ29yeVRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbS10ZXh0JylcclxuICAgIGxldCBhcnIgPSBbXVxyXG5cclxuICAgIGNhdGVnb3J5VGl0bGVzLmZvckVhY2godGl0bGUgPT4ge1xyXG4gICAgICAgIGFyci5wdXNoKHRpdGxlLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkpXHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChpbnB1dFZhbHVlID09PSAnJykge1xyXG5cclxuICAgICAgICBlZGl0Q2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnUGxlYXNlLCB3cml0ZSBzb21ldGhpbmchJ1xyXG5cclxuICAgIH0gZWxzZSBpZiAoYXJyLmluY2x1ZGVzKGlucHV0VmFsdWVUb0xvd2VyQ2FzZSkpIHtcclxuXHJcbiAgICAgICAgZWRpdENhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJ1BsZWFzZSwgd3JpdGUgbmV3IGNhdGVnb3J5ISdcclxuXHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBhY2NlcHRFZGl0Q2F0ZWdvcnlJbnB1dCgpXHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBlbnRlcktleUVkaXRDYXRlZ29yeSA9ICgpID0+IHtcclxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgIGNoZWNrRWRpdENhdGVnb3J5SW5wdXQoKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBhY2NlcHRFZGl0Q2F0ZWdvcnlJbnB1dCA9ICgpID0+IHtcclxuXHJcbiAgICBsZXQgdGV4dFZhbHVlID0gdGV4dFRvRWRpdC50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpXHJcblxyXG4gICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jYXRlZ29yeS1vcHRpb25bdmFsdWUgPSAke3RleHRWYWx1ZX1dYClcclxuXHJcbiAgICBvcHRpb24udmFsdWUgPSBlZGl0Q2F0ZWdvcnlJbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpXHJcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBlZGl0Q2F0ZWdvcnlJbnB1dC52YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLnNsaWNlKDEpXHJcblxyXG4gICAgdGV4dFRvRWRpdC50ZXh0Q29udGVudCA9IGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZWRpdENhdGVnb3J5SW5wdXQudmFsdWUuc2xpY2UoMSlcclxuICAgIGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlID0gJydcclxuICAgIGVkaXRDYXRlZ29yeUVyck1zZy50ZXh0Q29udGVudCA9ICcnXHJcbiAgICBlZGl0Q2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIG1hbmFnZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpXHJcbn1cclxuXHJcbmNvbnN0IGNsb3NlRWRpdENhdGVnb3J5UG9wdXAgPSAoKSA9PiB7XHJcbiAgICBlZGl0Q2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIG1hbmFnZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBlZGl0Q2F0ZWdvcnlJbnB1dC52YWx1ZSA9ICcnXHJcbiAgICBlZGl0Q2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnJ1xyXG59XHJcblxyXG5jb25zdCBkZWxldGVDYXRlZ29yeSA9IChlKSA9PiB7XHJcbiAgICBjb25zdCBkZWxldGVCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuY2F0ZWdvcnktZGVsZXRlLWJ1dHRvbicpXHJcbiAgICBjb25zdCBjbG9zZXN0TGkgPSBkZWxldGVCdG4uY2xvc2VzdCgnLmNhdGVnb3JpZXMtbGlzdC1pdGVtJylcclxuICAgIGNvbnN0IHBhcmFncmFwaCA9IGNsb3Nlc3RMaS5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0tdGV4dCcpXHJcbiAgICBjb25zdCBwYXJhZ3JhcGhWYWx1ZSA9IHBhcmFncmFwaC50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpXHJcblxyXG4gICAgY29uc3QgaXRlbXNUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcnktdG9kby10ZXh0JylcclxuXHJcbiAgICBsZXQgY2F0ZWdvcnlPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3J5LW9wdGlvbicpXHJcbiAgICBsZXQgYXJyID0gW11cclxuXHJcblxyXG4gICAgaWYgKGl0ZW1zVGl0bGVzLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICAgaXRlbXNUaXRsZXMuZm9yRWFjaCh0aXRsZSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0aXRsZVRvTG93ZXIgPSB0aXRsZS50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgIGFyci5wdXNoKHRpdGxlVG9Mb3dlcilcclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKGFyci5pbmNsdWRlcyhwYXJhZ3JhcGhWYWx1ZSkpIHtcclxuXHJcbiAgICAgICAgICAgIG1hbmFnZUNhdGVnb3J5SW5mby50ZXh0Q29udGVudCA9ICdZb3UgYXJlIHVzaW5nIHRoaXMgY2F0ZWdvcnkhJ1xyXG4gICAgICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpXHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBjYXRlZ29yeU9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYXRlZ29yeU9wdGlvbnMubGVuZ3RoID4gMSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBwYXJhZ3JhcGhWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0TGkucmVtb3ZlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLnRleHRDb250ZW50ID0gJ1lvdSBuZWVkIGF0IGxlYXN0IG9uZSBjYXRlZ29yeSEnXHJcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBjYXRlZ29yeU9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5T3B0aW9ucy5sZW5ndGggPiAxKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbi52YWx1ZSA9PT0gcGFyYWdyYXBoVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0TGkucmVtb3ZlKClcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb24ucmVtb3ZlKClcclxuICAgICAgICAgICAgICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLnRleHRDb250ZW50ID0gJ1lvdSBuZWVkIGF0IGxlYXN0IG9uZSBjYXRlZ29yeSEnXHJcbiAgICAgICAgICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjbG9zZUNhdGVnb3J5UG9wdXAgPSAoKSA9PiB7XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbScpKSB7XHJcblxyXG4gICAgICAgIGxldCBhbGxMaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbScpXHJcblxyXG4gICAgICAgIGFsbExpLmZvckVhY2gobGkgPT4ge1xyXG4gICAgICAgICAgICBsaS5yZW1vdmUoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgbWFuYWdlQ2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxufVxyXG5cclxuY29uc3Qgc2hvd01lY3JlYXRlQ2F0ZWdvcnlQb3B1cCA9ICgpID0+IHtcclxuICAgIGNyZWF0ZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBjbG9zZUNhdGVnb3J5UG9wdXAoKVxyXG59XHJcblxyXG5jb25zdCBhY2NlcHROZXdDYXRlZ29yeSA9ICgpID0+IHtcclxuICAgIGxldCBuZXdDYXRlZ29yeU9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXHJcbiAgICBuZXdDYXRlZ29yeU9wdGlvbi52YWx1ZSA9IGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKVxyXG4gICAgbmV3Q2F0ZWdvcnlPcHRpb24udGV4dENvbnRlbnQgPSBjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY3JlYXRlQ2F0ZWdvcnlJbnB1dC52YWx1ZS5zbGljZSgxKVxyXG4gICAgbmV3Q2F0ZWdvcnlPcHRpb24uY2xhc3NMaXN0LmFkZCgnY2F0ZWdvcnktb3B0aW9uJylcclxuXHJcbiAgICBjYXRlZ29yeVNlbGVjdC5hcHBlbmQobmV3Q2F0ZWdvcnlPcHRpb24pXHJcblxyXG4gICAgY3JlYXRlQ2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUgPSAnJ1xyXG4gICAgY3JlYXRlQ2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnJ1xyXG59XHJcblxyXG5jb25zdCBjaGVja0NhdGVnb3J5SW5wdXQgPSAoKSA9PiB7XHJcblxyXG4gICAgbGV0IGNhdGVnb3J5SW5wdXRWYWx1ZSA9IGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWVcclxuICAgIGxldCBjYXRlZ29yeUlucHV0VG9Mb3dlckNhc2UgPSBjYXRlZ29yeUlucHV0VmFsdWUudG9Mb3dlckNhc2UoKVxyXG4gICAgbGV0IGNhdGVnb3J5T3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yeS1vcHRpb24nKVxyXG4gICAgbGV0IGFyciA9IFtdXHJcblxyXG5cclxuICAgIGNhdGVnb3J5T3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgYXJyLnB1c2gob3B0aW9uLnZhbHVlKVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoY3JlYXRlQ2F0ZWdvcnlJbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuXHJcbiAgICAgICAgY3JlYXRlQ2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnUGxlYXNlLCB3cml0ZSBzb21ldGhpbmchJ1xyXG5cclxuICAgIH0gZWxzZSBpZiAoYXJyLmluY2x1ZGVzKGNhdGVnb3J5SW5wdXRUb0xvd2VyQ2FzZSkpIHtcclxuXHJcbiAgICAgICAgY3JlYXRlQ2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnWW91IGFscmVhZHkgaGF2ZSB0aGlzIG9uZSEnXHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgYWNjZXB0TmV3Q2F0ZWdvcnkoKVxyXG4gICAgICAgIHNob3dNZU1hbmFnZUNhdGVnb3J5UG9wdXAoKVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZW50ZXJLZXlBZGRDYXRlZ29yeSA9ICgpID0+IHtcclxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgIGNoZWNrQ2F0ZWdvcnlJbnB1dCgpXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGNhbmNlbE5ld0NhdGVnb3J5ID0gKCkgPT4ge1xyXG4gICAgY3JlYXRlQ2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUgPSAnJ1xyXG4gICAgY3JlYXRlQ2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnJ1xyXG4gICAgc2hvd01lTWFuYWdlQ2F0ZWdvcnlQb3B1cCgpXHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrSWZBbnlJdGVtTGVmdCA9ICgpID0+IHtcclxuICAgIGlmIChhY2NvcmRpb24ucXVlcnlTZWxlY3RvcignLmFjYy1ib3gnKSkge1xyXG4gICAgICAgIGFsZXJ0SW5mby50ZXh0Q29udGVudCA9ICcnXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFsZXJ0SW5mby50ZXh0Q29udGVudCA9ICdGb3Igbm93IHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8uJ1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCB0b2dnbGVBY2NvcmRpb24gPSAoZSkgPT4ge1xyXG4gICAgY29uc3QgYWNjb3JkaW9uQnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmNhdGVnb3J5LXRvZG8tdGl0bGUtYnRuJylcclxuICAgIGNvbnN0IGNhdGVnb3J5QXJyb3cgPSBhY2NvcmRpb25CdG4ucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LWFycm93JylcclxuICAgIGNvbnN0IGFjY29yZGlvbkJveCA9IGFjY29yZGlvbkJ0bi5uZXh0RWxlbWVudFNpYmxpbmdcclxuXHJcbiAgICBhY2NvcmRpb25Cb3guY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZScpXHJcbiAgICBjYXRlZ29yeUFycm93LmNsYXNzTGlzdC50b2dnbGUoJ3JvdGF0ZScpXHJcbn1cclxuXHJcblxyXG5hZGRJdGVtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkSXRlbSlcclxudGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZW50ZXJLZXlBZGRJdGVtKVxyXG5cclxuZWRpdEl0ZW1CdG5BY2NlcHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0VkaXRJdGVtSW5wdXQpXHJcbmVkaXRJdGVtSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlbnRlcktleUVkaXRJdGVtKVxyXG5lZGl0SXRlbUJ0bkNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbEVkaXRlZFRleHQpXHJcblxyXG5tYW5hZ2VDYXRlZ29yeUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dNZU1hbmFnZUNhdGVnb3J5UG9wdXApXHJcbm1hbmFnZUNhdGVnb3J5Q2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUNhdGVnb3J5UG9wdXApXHJcblxyXG5lZGl0Q2F0ZWdvcnlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGVudGVyS2V5RWRpdENhdGVnb3J5KVxyXG5lZGl0Q2F0ZWdvcnlBY2NlcHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0VkaXRDYXRlZ29yeUlucHV0KVxyXG5lZGl0Q2F0ZWdvcnlDYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUVkaXRDYXRlZ29yeVBvcHVwKVxyXG5cclxuY3JlYXRlQ2F0ZWdvcnlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93TWVjcmVhdGVDYXRlZ29yeVBvcHVwKVxyXG5jcmVhdGVDYXRlZ29yeUJ0bkFjY2VwdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrQ2F0ZWdvcnlJbnB1dClcclxuY3JlYXRlQ2F0ZWdvcnlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGVudGVyS2V5QWRkQ2F0ZWdvcnkpXHJcbmNyZWF0ZUNhdGVnb3J5QnRuQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FuY2VsTmV3Q2F0ZWdvcnkpIl19
