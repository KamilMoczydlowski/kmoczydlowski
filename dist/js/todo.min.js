"use strict";var textToEdit,addItemBtn=document.querySelector(".add-item-btn"),textInput=document.querySelector(".text-input"),accordion=document.querySelector(".accordion"),listItemTemp=document.querySelector(".list-item-temp"),alertInfo=document.querySelector(".alert-info"),manageCategoryBtn=document.querySelector(".manage-category-btn"),editItemPopup=document.querySelector(".edit-task-popup"),editItemInput=document.querySelector(".edit-input"),editItemErrMsg=document.querySelector(".edit-error-msg"),editItemBtnAccept=document.querySelector(".edit-button-accept"),editItemBtnCancel=document.querySelector(".edit-button-cancel"),manageCategoryPopup=document.querySelector(".manage-category-popup"),manageCategoryTemplate=document.querySelector(".categories-list-item-template"),manageCategoryList=document.querySelector(".categories-list"),manageCategoryInfo=document.querySelector(".manage-category-info"),createCategoryBtn=document.querySelector(".add-category-btn"),manageCategoryCloseBtn=document.querySelector(".close-category-btn"),categorySelect=document.querySelector(".category-select"),editCategoryPopup=document.querySelector(".edit-category-popup"),editCategoryInput=document.querySelector(".edit-category-input"),editCategoryErrMsg=document.querySelector(".edit-category-error-msg"),editCategoryAcceptBtn=document.querySelector(".edit-category-accept"),editCategoryCancelBtn=document.querySelector(".edit-category-cancel"),createCategoryPopup=document.querySelector(".create-category-popup"),createCategoryErrMsg=document.querySelector(".create-category-error-msg"),createCategoryBtnAccept=document.querySelector(".create-category-accept"),createCategoryBtnCancel=document.querySelector(".create-category-cancel"),createCategoryInput=document.querySelector(".create-category-input"),itemIdNumber=0,addItem=function(){var e,t,o,r,a,n,c,i=listItemTemp.content.cloneNode(!0);""!==textInput.value?(e=(c=categorySelect.value)[0].toUpperCase()+c.slice(1),n=accordion.querySelector("#".concat(c)),itemIdNumber++,alertInfo.textContent="",n?n.id==c&&(n=n.querySelector(".acc-list"),r=(a=i.querySelector(".list-item")).querySelector(".text-content"),o=(t=n.previousElementSibling).querySelector(".category-todo-number").textContent,o++,t.querySelector(".category-todo-number").textContent=o,a.setAttribute("id","item-".concat(itemIdNumber)),r.textContent=textInput.value,textInput.value="",addBtnsAndListeners(a),n.appendChild(a),n.classList.remove("hide"),n.previousElementSibling.querySelector(".category-arrow").classList.remove("rotate")):((t=i.querySelector(".acc-box")).setAttribute("id","".concat(c)),o=t.querySelector(".category-todo-title-btn"),r=t.querySelector(".category-todo-text"),a=t.querySelector(".category-todo-number"),c=(n=i.querySelector(".list-item")).querySelector(".text-content"),o.addEventListener("click",toggleAccordion),r.textContent=e,a.textContent="1",n.setAttribute("id","item-".concat(itemIdNumber)),c.textContent=textInput.value,textInput.value="",addBtnsAndListeners(n),accordion.appendChild(t))):alertInfo.textContent="Write something to do!"},addBtnsAndListeners=function(e){var t=e.querySelector(".button-check"),o=e.querySelector(".button-edit"),e=e.querySelector(".button-delete");t.addEventListener("click",checkItem),o.addEventListener("click",editItem),e.addEventListener("click",deleteItem),e.addEventListener("click",checkIfAnyItemLeft)},enterKeyAddItem=function(){13===event.keyCode&&addItem()},checkItem=function(e){var e=e.target.closest(".button-check"),t=e.nextElementSibling,e=e.closest(".list-item");!1===t.disabled?(t.disabled=!0,e.classList.add("completed")):(t.disabled=!1,e.classList.remove("completed"))},editItem=function(e){e=e.target.closest(".button-edit").closest(".list-item");textToEdit=e.querySelector(".text-content"),editItemPopup.closest(".popup").classList.add("display-block"),editItemInput.value=textToEdit.textContent},deleteItem=function(e){var t=e.target.closest(".acc-box"),e=e.target.closest(".button-delete"),o=t.querySelector(".category-todo-number").textContent;e.closest(".list-item").remove(),editItemInput.value="",o--,0==(t.querySelector(".category-todo-number").textContent=o)&&t.remove()},acceptEditedText=function(){textToEdit.textContent=editItemInput.value,editItemPopup.closest(".popup").classList.remove("display-block"),textToEdit.textContent=editItemInput.value,editItemErrMsg.textContent="",editItemInput.style.border="none"},enterKeyEditItem=function(){13===event.keyCode&&acceptEditedText()},checkEditItemInput=function(){textToEdit.textContent===editItemInput.value?(editItemInput.style.border="2px solid red",editItemErrMsg.textContent="Please, change something!"):""===editItemInput.value?(editItemInput.style.border="2px solid red",editItemErrMsg.textContent="Please, write something!"):acceptEditedText()},cancelEditedText=function(){editItemPopup.closest(".popup").classList.remove("display-block"),editItemInput.value="",editItemErrMsg.textContent="",editItemInput.style.border="none"},showMeManageCategoryPopup=function(){document.querySelectorAll(".category-option").forEach(function(e){createLi(e)}),manageCategoryPopup.closest(".popup").classList.add("display-block")},createLi=function(e){var t=manageCategoryTemplate.content.cloneNode(!0).querySelector(".categories-list-item"),o=t.querySelector(".categories-list-item-text"),e=e.textContent,r=t.querySelector(".category-edit-button"),a=t.querySelector(".category-delete-button");r.addEventListener("click",editCategory),a.addEventListener("click",deleteCategory),o.textContent=e,manageCategoryList.appendChild(t)},editCategory=function(e){var e=e.target.closest(".category-edit-button").closest(".categories-list-item"),e=(textToEdit=e.querySelector(".categories-list-item-text")).textContent.toLowerCase(),t=document.querySelectorAll(".category-todo-text"),o=[];t.forEach(function(e){o.push(e.textContent.toLowerCase())}),o.includes(e)?(manageCategoryInfo.textContent="You are using this one!",manageCategoryInfo.classList.add("display-block")):(editCategoryInput.value=textToEdit.textContent,editCategoryPopup.closest(".popup").classList.add("display-block"),manageCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryInfo.classList.remove("display-block"))},checkEditCategoryInput=function(){var e=editCategoryInput.value,t=e.toLowerCase(),o=document.querySelectorAll(".categories-list-item-text"),r=[];o.forEach(function(e){r.push(e.textContent.toLowerCase())}),""===e?editCategoryErrMsg.textContent="Please, write something!":r.includes(t)?editCategoryErrMsg.textContent="Please, write new category!":acceptEditCategoryInput()},enterKeyEditCategory=function(){13===event.keyCode&&checkEditCategoryInput()},acceptEditCategoryInput=function(){var e=textToEdit.textContent.toLowerCase(),e=document.querySelector(".category-option[value = ".concat(e,"]"));e.value=editCategoryInput.value.toLowerCase(),e.textContent=editCategoryInput.value.charAt(0).toUpperCase()+editCategoryInput.value.slice(1),textToEdit.textContent=editCategoryInput.value.charAt(0).toUpperCase()+editCategoryInput.value.slice(1),editCategoryInput.value="",editCategoryErrMsg.textContent="",editCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryPopup.closest(".popup").classList.add("display-block")},closeEditCategoryPopup=function(){editCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryPopup.closest(".popup").classList.add("display-block"),editCategoryInput.value="",editCategoryErrMsg.textContent=""},deleteCategory=function(e){var t=e.target.closest(".category-delete-button").closest(".categories-list-item"),o=t.querySelector(".categories-list-item-text").textContent.toLowerCase(),e=document.querySelectorAll(".category-todo-text"),r=document.querySelectorAll(".category-option"),a=[];0<e.length?(e.forEach(function(e){e=e.textContent.toLowerCase();a.push(e)}),a.includes(o)?(manageCategoryInfo.textContent="You are using this category!",manageCategoryInfo.classList.add("display-block")):r.forEach(function(e){1<r.length?e.value===o&&(t.remove(),e.remove(),manageCategoryInfo.classList.remove("display-block")):(manageCategoryInfo.textContent="You need at least one category!",manageCategoryInfo.classList.add("display-block"))})):r.forEach(function(e){1<r.length?e.value===o&&(t.remove(),e.remove(),manageCategoryInfo.classList.remove("display-block")):(manageCategoryInfo.textContent="You need at least one category!",manageCategoryInfo.classList.add("display-block"))})},closeCategoryPopup=function(){document.querySelectorAll(".categories-list-item")&&document.querySelectorAll(".categories-list-item").forEach(function(e){e.remove()}),manageCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryInfo.classList.remove("display-block")},showMecreateCategoryPopup=function(){createCategoryPopup.closest(".popup").classList.add("display-block"),manageCategoryInfo.classList.remove("display-block"),closeCategoryPopup()},acceptNewCategory=function(){var e=document.createElement("option");e.value=createCategoryInput.value.toLowerCase(),e.textContent=createCategoryInput.value.charAt(0).toUpperCase()+createCategoryInput.value.slice(1),e.classList.add("category-option"),categorySelect.append(e),createCategoryPopup.closest(".popup").classList.remove("display-block"),createCategoryInput.value="",createCategoryErrMsg.textContent=""},checkCategoryInput=function(){var e=createCategoryInput.value.toLowerCase(),t=document.querySelectorAll(".category-option"),o=[];t.forEach(function(e){o.push(e.value)}),""===createCategoryInput.value?createCategoryErrMsg.textContent="Please, write something!":o.includes(e)?createCategoryErrMsg.textContent="You already have this one!":(acceptNewCategory(),showMeManageCategoryPopup())},enterKeyAddCategory=function(){13===event.keyCode&&checkCategoryInput()},cancelNewCategory=function(){createCategoryPopup.closest(".popup").classList.remove("display-block"),createCategoryInput.value="",createCategoryErrMsg.textContent="",showMeManageCategoryPopup()},checkIfAnyItemLeft=function(){accordion.querySelector(".acc-box")?alertInfo.textContent="":alertInfo.textContent="For now there is nothing to do."},toggleAccordion=function(e){var e=e.target.closest(".category-todo-title-btn"),t=e.querySelector(".category-arrow");e.nextElementSibling.classList.toggle("hide"),t.classList.toggle("rotate")};addItemBtn.addEventListener("click",addItem),textInput.addEventListener("keyup",enterKeyAddItem),editItemBtnAccept.addEventListener("click",checkEditItemInput),editItemInput.addEventListener("keyup",enterKeyEditItem),editItemBtnCancel.addEventListener("click",cancelEditedText),manageCategoryBtn.addEventListener("click",showMeManageCategoryPopup),manageCategoryCloseBtn.addEventListener("click",closeCategoryPopup),editCategoryInput.addEventListener("keyup",enterKeyEditCategory),editCategoryAcceptBtn.addEventListener("click",checkEditCategoryInput),editCategoryCancelBtn.addEventListener("click",closeEditCategoryPopup),createCategoryBtn.addEventListener("click",showMecreateCategoryPopup),createCategoryBtnAccept.addEventListener("click",checkCategoryInput),createCategoryInput.addEventListener("keyup",enterKeyAddCategory),createCategoryBtnCancel.addEventListener("click",cancelNewCategory);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG8uanMiXSwibmFtZXMiOlsidGV4dFRvRWRpdCIsImFkZEl0ZW1CdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0SW5wdXQiLCJhY2NvcmRpb24iLCJsaXN0SXRlbVRlbXAiLCJtYW5hZ2VDYXRlZ29yeUJ0biIsImVkaXRJdGVtUG9wdXAiLCJlZGl0SXRlbUlucHV0IiwiZWRpdEl0ZW1FcnJNc2ciLCJlZGl0SXRlbUJ0bkFjY2VwdCIsIm1hbmFnZUNhdGVnb3J5UG9wdXAiLCJtYW5hZ2VDYXRlZ29yeVRlbXBsYXRlIiwibWFuYWdlQ2F0ZWdvcnlMaXN0IiwibWFuYWdlQ2F0ZWdvcnlJbmZvIiwiY3JlYXRlQ2F0ZWdvcnlCdG4iLCJtYW5hZ2VDYXRlZ29yeUNsb3NlQnRuIiwiZWRpdENhdGVnb3J5UG9wdXAiLCJlZGl0Q2F0ZWdvcnlFcnJNc2ciLCJlZGl0Q2F0ZWdvcnlBY2NlcHRCdG4iLCJlZGl0Q2F0ZWdvcnlDYW5jZWxCdG4iLCJjcmVhdGVDYXRlZ29yeVBvcHVwIiwiY3JlYXRlQ2F0ZWdvcnlFcnJNc2ciLCJjcmVhdGVDYXRlZ29yeUJ0bkNhbmNlbCIsImNyZWF0ZUNhdGVnb3J5SW5wdXQiLCJpdGVtSWROdW1iZXIiLCJ2YWx1ZSIsImFkZEl0ZW0iLCJjYXRlZ29yeVRpdGxlVXBwZXJDYXNlIiwiYWNjTGlzdCIsImFjY0JveCIsImFjY29yZGlvbkJ1dHRvbiIsInRleHRDb250ZW50IiwiYWRkQnRuc0FuZExpc3RlbmVycyIsImFwcGVuZENoaWxkIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhdGVnb3J5VmFsdWUiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiYWNjTnVtYmVyIiwiaWQiLCJpdGVtIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFjY0J0biIsInNldEF0dHJpYnV0ZSIsImxpc3RJdGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZUFjY29yZGlvbiIsImFsZXJ0SW5mbyIsIm51bWJlciIsImNvbmNhdCIsImJ0bkNoZWNrSXRlbSIsImVsIiwiYnRuRGVsZXRlSXRlbSIsImJ0bkVkaXRJdGVtIiwiY2hlY2tJdGVtIiwiY2hlY2tCdG4iLCJuZXh0RWxlbWVudFNpYmxpbmciLCJlZGl0SXRlbSIsImRlbGV0ZUl0ZW0iLCJkaXNhYmxlZCIsImNoZWNrSWZBbnlJdGVtTGVmdCIsImVudGVyS2V5QWRkSXRlbSIsImVkaXRCdG4iLCJlIiwidGFyZ2V0IiwiY2xvc2VzdCIsImFkZCIsImRlbGV0ZUJ0biIsImFjY2VwdEVkaXRlZFRleHQiLCJzdHlsZSIsImJvcmRlciIsImVudGVyS2V5RWRpdEl0ZW0iLCJldmVudCIsImtleUNvZGUiLCJzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwIiwiY2F0ZWdvcnlPcHRpb25zIiwicXVlcnlTZWxlY3RvckFsbCIsIm5ld0xpIiwiZGVsZXRlQ2F0ZWdvcnkiLCJ0ZXh0UGFyYWdyYXBoIiwiYnRuIiwiZm9yRWFjaCIsImFyciIsImVkaXRDYXRlZ29yeUlucHV0IiwiZWRpdENhdGVnb3J5IiwiY2hlY2tFZGl0Q2F0ZWdvcnlJbnB1dCIsImlucHV0VmFsdWVUb0xvd2VyQ2FzZSIsImlucHV0VmFsdWUiLCJjbG9zZXN0TGkiLCJ0b0xvd2VyQ2FzZSIsImNhdGVnb3J5VGl0bGVzIiwidGl0bGUiLCJwdXNoIiwidGV4dFZhbHVlTG93ZXJDYXNlIiwib3B0aW9uIiwiY2hhckF0IiwicGFyYWdyYXBoIiwiaXRlbXNUaXRsZXMiLCJpbmNsdWRlcyIsImFjY2VwdEVkaXRDYXRlZ29yeUlucHV0IiwiZW50ZXJLZXlFZGl0Q2F0ZWdvcnkiLCJ0ZXh0VmFsdWUiLCJsZW5ndGgiLCJwYXJhZ3JhcGhWYWx1ZSIsImNsb3NlRWRpdENhdGVnb3J5UG9wdXAiLCJjbG9zZUNhdGVnb3J5UG9wdXAiLCJ0aXRsZVRvTG93ZXIiLCJuZXdDYXRlZ29yeU9wdGlvbiIsImNhdGVnb3J5U2VsZWN0IiwiY2hlY2tDYXRlZ29yeUlucHV0IiwiY2F0ZWdvcnlJbnB1dFRvTG93ZXJDYXNlIiwiY2F0ZWdvcnlJbnB1dFZhbHVlIiwiY2FuY2VsTmV3Q2F0ZWdvcnkiLCJjYXRlZ29yeUFycm93IiwiYWNjb3JkaW9uQnRuIiwiYWNjb3JkaW9uQm94IiwiZWRpdEl0ZW1CdG5DYW5jZWwiLCJjYW5jZWxFZGl0ZWRUZXh0IiwiY3JlYXRlRWxlbWVudCIsInNob3dNZWNyZWF0ZUNhdGVnb3J5UG9wdXAiLCJjcmVhdGVDYXRlZ29yeUJ0bkFjY2VwdCIsImVudGVyS2V5QWRkQ2F0ZWdvcnkiLCJhcHBlbmQiLCJhY2NlcHROZXdDYXRlZ29yeSIsInRvZ2dsZSIsImNoZWNrRWRpdEl0ZW1JbnB1dCJdLCJtYXBwaW5ncyI6ImFBQUEsSUF3Q0lBLFdBeENFQyxXQUFhQyxTQUFTQyxjQUFjLGlCQUNwQ0MsVUFBWUYsU0FBU0MsY0FBYyxlQURuQ0YsVUFBYUMsU0FBU0MsY0FBYyxjQUNwQ0MsYUFBWUYsU0FBU0MsY0FBYyxtQkFDbkNFLFVBQVlILFNBQVNDLGNBQWMsZUFDbkNHLGtCQUFlSixTQUFTQyxjQUFjLHdCQUV0Q0ksY0FBaUJMLFNBQUdBLGNBQVNDLG9CQUU3QkssY0FBZ0JOLFNBQVNDLGNBQWMsZUFDdkNNLGVBQWdCUCxTQUFTQyxjQUFjLG1CQUN2Q08sa0JBQWlCUixTQUFTQyxjQUFjLHVCQUN4Q1Esa0JBQW9CVCxTQUFTQyxjQUFjLHVCQUczQ1Msb0JBQXNCVixTQUFTQyxjQUFjLDBCQUM3Q1UsdUJBQXlCWCxTQUFTQyxjQUFjLGtDQUNoRFcsbUJBQXFCWixTQUFTQyxjQUFjLG9CQUM1Q1ksbUJBQXFCYixTQUFTQyxjQUFjLHlCQUM1Q2Esa0JBQW9CZCxTQUFTQyxjQUFjLHFCQUMzQ2MsdUJBQXlCZixTQUFTQyxjQUFjLHVCQUloRGUsZUFBaUJoQixTQUFXQyxjQUFSLG9CQUVwQmdCLGtCQUFxQmpCLFNBQVNDLGNBQWMsd0JBQzVDaUIsa0JBQXFCbEIsU0FBR0EsY0FBU0Msd0JBQ2pDa0IsbUJBQXFCbkIsU0FBV0MsY0FBUiw0QkFFeEJtQixzQkFBc0JwQixTQUFTQyxjQUFjLHlCQUM3Q29CLHNC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UzRELG9CQUVqRHRCLGtCQUFrQnRDLGlCQUFpQixRQUFTdUQsc0JBQzVDckYsc0JBQXNCOEIsaUJBQWlCLFFBQVN3Qyx3QkFDaERyRSxzQkFBc0I2QixpQkFBaUIsUUFBUzJELHdCQUVoRDdGLGtCQUFrQmtDLGlCQUFpQixRQUFTMEUsMkJBQzVDQyx3QkFBd0IzRSxpQkFBaUIsUUFBU2dFLG9CQUNsRHpGLG9CQUFvQnlCLGlCQUFpQixRQUFTNEUscUJBQzlDdEcsd0JBQXdCMEIsaUJBQWlCLFFBQVNtRSIsImZpbGUiOiJ0b2RvLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFkZEl0ZW1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWl0ZW0tYnRuJylcclxuY29uc3QgdGV4dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtaW5wdXQnKVxyXG5jb25zdCBhY2NvcmRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uJylcclxuY29uc3QgbGlzdEl0ZW1UZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbS10ZW1wJylcclxuY29uc3QgYWxlcnRJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LWluZm8nKVxyXG5jb25zdCBtYW5hZ2VDYXRlZ29yeUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2UtY2F0ZWdvcnktYnRuJylcclxuXHJcbmNvbnN0IGVkaXRJdGVtUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10YXNrLXBvcHVwJylcclxuY29uc3QgZWRpdEl0ZW1JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWlucHV0JylcclxuY29uc3QgZWRpdEl0ZW1FcnJNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1lcnJvci1tc2cnKVxyXG5jb25zdCBlZGl0SXRlbUJ0bkFjY2VwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWJ1dHRvbi1hY2NlcHQnKVxyXG5jb25zdCBlZGl0SXRlbUJ0bkNhbmNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWJ1dHRvbi1jYW5jZWwnKVxyXG5cclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2UtY2F0ZWdvcnktcG9wdXAnKVxyXG5jb25zdCBtYW5hZ2VDYXRlZ29yeVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMtbGlzdC1pdGVtLXRlbXBsYXRlJylcclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMtbGlzdCcpXHJcbmNvbnN0IG1hbmFnZUNhdGVnb3J5SW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2UtY2F0ZWdvcnktaW5mbycpXHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1jYXRlZ29yeS1idG4nKVxyXG5jb25zdCBtYW5hZ2VDYXRlZ29yeUNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlLWNhdGVnb3J5LWJ0bicpXHJcblxyXG5jb25zdCBjYXRlZ29yeVNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS1zZWxlY3QnKVxyXG5cclxuY29uc3QgZWRpdENhdGVnb3J5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1jYXRlZ29yeS1wb3B1cCcpXHJcbmNvbnN0IGVkaXRDYXRlZ29yeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2F0ZWdvcnktaW5wdXQnKVxyXG5jb25zdCBlZGl0Q2F0ZWdvcnlFcnJNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1jYXRlZ29yeS1lcnJvci1tc2cnKVxyXG5jb25zdCBlZGl0Q2F0ZWdvcnlBY2NlcHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1jYXRlZ29yeS1hY2NlcHQnKVxyXG5jb25zdCBlZGl0Q2F0ZWdvcnlDYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1jYXRlZ29yeS1jYW5jZWwnKVxyXG5cclxuY29uc3QgY3JlYXRlQ2F0ZWdvcnlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtY2F0ZWdvcnktcG9wdXAnKVxyXG5jb25zdCBjcmVhdGVDYXRlZ29yeUVyck1zZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtY2F0ZWdvcnktZXJyb3ItbXNnJylcclxuY29uc3QgY3JlYXRlQ2F0ZWdvcnlCdG5BY2NlcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWNhdGVnb3J5LWFjY2VwdCcpXHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5QnRuQ2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1jYXRlZ29yeS1jYW5jZWwnKVxyXG5jb25zdCBjcmVhdGVDYXRlZ29yeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1jYXRlZ29yeS1pbnB1dCcpXHJcblxyXG5sZXQgdGV4dFRvRWRpdFxyXG5cclxubGV0IGl0ZW1JZE51bWJlciA9IDBcclxuXHJcbmNvbnN0IGFkZEl0ZW0gPSAoKSA9PiB7XHJcblxyXG4gICAgbGV0IGxpc3RJdGVtID0gbGlzdEl0ZW1UZW1wLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXHJcblxyXG4gICAgaWYgKHRleHRJbnB1dC52YWx1ZSAhPT0gJycpIHtcclxuXHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlWYWx1ZSA9IGNhdGVnb3J5U2VsZWN0LnZhbHVlXHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlUaXRsZVVwcGVyQ2FzZSA9IGNhdGVnb3J5VmFsdWVbMF0udG9VcHBlckNhc2UoKSArIGNhdGVnb3J5VmFsdWUuc2xpY2UoMSlcclxuXHJcbiAgICAgICAgbGV0IGFjY0JveCA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKGAjJHtjYXRlZ29yeVZhbHVlfWApXHJcblxyXG4gICAgICAgIGl0ZW1JZE51bWJlcisrXHJcbiAgICAgICAgYWxlcnRJbmZvLnRleHRDb250ZW50ID0gJydcclxuXHJcbiAgICAgICAgaWYgKGFjY0JveCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGFjY0JveC5pZCA9PSBjYXRlZ29yeVZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGFjY0xpc3QgPSBhY2NCb3gucXVlcnlTZWxlY3RvcignLmFjYy1saXN0JylcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbScpXHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dENvbnRlbnQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWNvbnRlbnQnKVxyXG4gICAgICAgICAgICAgICAgbGV0IGFjY0J0biA9IGFjY0xpc3QucHJldmlvdXNFbGVtZW50U2libGluZ1xyXG4gICAgICAgICAgICAgICAgbGV0IGFjY051bWJlciA9IGFjY0J0bi5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktdG9kby1udW1iZXInKS50ZXh0Q29udGVudFxyXG4gICAgICAgICAgICAgICAgYWNjTnVtYmVyKytcclxuXHJcbiAgICAgICAgICAgICAgICBhY2NCdG4ucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tbnVtYmVyJykudGV4dENvbnRlbnQgPSBhY2NOdW1iZXJcclxuXHJcbiAgICAgICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBgaXRlbS0ke2l0ZW1JZE51bWJlcn1gKVxyXG4gICAgICAgICAgICAgICAgdGV4dENvbnRlbnQudGV4dENvbnRlbnQgPSB0ZXh0SW5wdXQudmFsdWVcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQudmFsdWUgPSAnJ1xyXG5cclxuICAgICAgICAgICAgICAgIGFkZEJ0bnNBbmRMaXN0ZW5lcnMoaXRlbSlcclxuXHJcbiAgICAgICAgICAgICAgICBhY2NMaXN0LmFwcGVuZENoaWxkKGl0ZW0pXHJcbiAgICAgICAgICAgICAgICBhY2NMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxyXG4gICAgICAgICAgICAgICAgYWNjTGlzdC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS1hcnJvdycpLmNsYXNzTGlzdC5yZW1vdmUoJ3JvdGF0ZScpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGFjY0JveCA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hY2MtYm94JylcclxuICAgICAgICAgICAgYWNjQm94LnNldEF0dHJpYnV0ZSgnaWQnLCBgJHtjYXRlZ29yeVZhbHVlfWApXHJcbiAgICAgICAgICAgIGxldCBhY2NvcmRpb25CdXR0b24gPSBhY2NCb3gucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tdGl0bGUtYnRuJylcclxuICAgICAgICAgICAgbGV0IHRpdGxlID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLXRleHQnKVxyXG4gICAgICAgICAgICBsZXQgbnVtYmVyID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLW51bWJlcicpXHJcbiAgICAgICAgICAgIGxldCBpdGVtID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbScpXHJcbiAgICAgICAgICAgIGxldCB0ZXh0Q29udGVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnRleHQtY29udGVudCcpXHJcblxyXG4gICAgICAgICAgICBhY2NvcmRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBY2NvcmRpb24pXHJcbiAgICAgICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gY2F0ZWdvcnlUaXRsZVVwcGVyQ2FzZVxyXG4gICAgICAgICAgICBudW1iZXIudGV4dENvbnRlbnQgPSAnMSdcclxuICAgICAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgYGl0ZW0tJHtpdGVtSWROdW1iZXJ9YClcclxuICAgICAgICAgICAgdGV4dENvbnRlbnQudGV4dENvbnRlbnQgPSB0ZXh0SW5wdXQudmFsdWVcclxuXHJcbiAgICAgICAgICAgIHRleHRJbnB1dC52YWx1ZSA9ICcnXHJcblxyXG4gICAgICAgICAgICBhZGRCdG5zQW5kTGlzdGVuZXJzKGl0ZW0pXHJcblxyXG4gICAgICAgICAgICBhY2NvcmRpb24uYXBwZW5kQ2hpbGQoYWNjQm94KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFsZXJ0SW5mby50ZXh0Q29udGVudCA9ICdXcml0ZSBzb21ldGhpbmcgdG8gZG8hJ1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBhZGRCdG5zQW5kTGlzdGVuZXJzID0gKGVsKSA9PiB7XHJcbiAgICBsZXQgYnRuQ2hlY2tJdGVtID0gZWwucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jaGVjaycpXHJcbiAgICBsZXQgYnRuRWRpdEl0ZW0gPSBlbC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWVkaXQnKVxyXG4gICAgbGV0IGJ0bkRlbGV0ZUl0ZW0gPSBlbC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWRlbGV0ZScpXHJcblxyXG4gICAgYnRuQ2hlY2tJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tJdGVtKVxyXG4gICAgYnRuRWRpdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlZGl0SXRlbSlcclxuICAgIGJ0bkRlbGV0ZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVJdGVtKVxyXG4gICAgYnRuRGVsZXRlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrSWZBbnlJdGVtTGVmdClcclxufVxyXG5cclxuY29uc3QgZW50ZXJLZXlBZGRJdGVtID0gKCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgYWRkSXRlbSgpXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrSXRlbSA9IChlKSA9PiB7XHJcbiAgICBsZXQgY2hlY2tCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuYnV0dG9uLWNoZWNrJylcclxuICAgIGxldCBlZGl0QnRuID0gY2hlY2tCdG4ubmV4dEVsZW1lbnRTaWJsaW5nXHJcbiAgICBsZXQgbGlzdEl0ZW0gPSBjaGVja0J0bi5jbG9zZXN0KCcubGlzdC1pdGVtJylcclxuXHJcbiAgICBpZiAoZWRpdEJ0bi5kaXNhYmxlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICBlZGl0QnRuLmRpc2FibGVkID0gdHJ1ZVxyXG4gICAgICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVkaXRCdG4uZGlzYWJsZWQgPSBmYWxzZVxyXG4gICAgICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRJdGVtID0gKGUpID0+IHtcclxuICAgIGxldCBlZGl0QnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmJ1dHRvbi1lZGl0JylcclxuICAgIGxldCBsaXN0SXRlbSA9IGVkaXRCdG4uY2xvc2VzdCgnLmxpc3QtaXRlbScpXHJcbiAgICB0ZXh0VG9FZGl0ID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLnRleHQtY29udGVudCcpXHJcbiAgICBlZGl0SXRlbVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgZWRpdEl0ZW1JbnB1dC52YWx1ZSA9IHRleHRUb0VkaXQudGV4dENvbnRlbnRcclxufVxyXG5cclxuY29uc3QgZGVsZXRlSXRlbSA9IChlKSA9PiB7XHJcbiAgICBsZXQgYWNjQm94ID0gZS50YXJnZXQuY2xvc2VzdCgnLmFjYy1ib3gnKVxyXG4gICAgbGV0IGRlbGV0ZUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5idXR0b24tZGVsZXRlJylcclxuICAgIGxldCBudW1iZXIgPSBhY2NCb3gucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tbnVtYmVyJykudGV4dENvbnRlbnRcclxuICAgIGRlbGV0ZUJ0bi5jbG9zZXN0KCcubGlzdC1pdGVtJykucmVtb3ZlKClcclxuICAgIGVkaXRJdGVtSW5wdXQudmFsdWUgPSAnJ1xyXG4gICAgbnVtYmVyLS1cclxuICAgIGFjY0JveC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktdG9kby1udW1iZXInKS50ZXh0Q29udGVudCA9IG51bWJlclxyXG5cclxuICAgIGlmIChudW1iZXIgPT09IDApIHtcclxuICAgICAgICBhY2NCb3gucmVtb3ZlKClcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNvbnN0IGFjY2VwdEVkaXRlZFRleHQgPSAoKSA9PiB7XHJcbiAgICB0ZXh0VG9FZGl0LnRleHRDb250ZW50ID0gZWRpdEl0ZW1JbnB1dC52YWx1ZVxyXG4gICAgZWRpdEl0ZW1Qb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIHRleHRUb0VkaXQudGV4dENvbnRlbnQgPSBlZGl0SXRlbUlucHV0LnZhbHVlXHJcbiAgICBlZGl0SXRlbUVyck1zZy50ZXh0Q29udGVudCA9ICcnXHJcbiAgICBlZGl0SXRlbUlucHV0LnN0eWxlLmJvcmRlciA9ICdub25lJ1xyXG59XHJcblxyXG5jb25zdCBlbnRlcktleUVkaXRJdGVtID0gKCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgYWNjZXB0RWRpdGVkVGV4dCgpXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrRWRpdEl0ZW1JbnB1dCA9ICgpID0+IHtcclxuICAgIFxyXG4gICAgaWYgKHRleHRUb0VkaXQudGV4dENvbnRlbnQgPT09IGVkaXRJdGVtSW5wdXQudmFsdWUpIHtcclxuXHJcbiAgICAgICAgZWRpdEl0ZW1JbnB1dC5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkIHJlZCdcclxuICAgICAgICBlZGl0SXRlbUVyck1zZy50ZXh0Q29udGVudCA9ICdQbGVhc2UsIGNoYW5nZSBzb21ldGhpbmchJ1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZWRpdEl0ZW1JbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuXHJcbiAgICAgICAgZWRpdEl0ZW1JbnB1dC5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkIHJlZCdcclxuICAgICAgICBlZGl0SXRlbUVyck1zZy50ZXh0Q29udGVudCA9ICdQbGVhc2UsIHdyaXRlIHNvbWV0aGluZyEnXHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgYWNjZXB0RWRpdGVkVGV4dCgpXHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjYW5jZWxFZGl0ZWRUZXh0ID0gKCkgPT4ge1xyXG4gICAgZWRpdEl0ZW1Qb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJylcclxuICAgIGVkaXRJdGVtSW5wdXQudmFsdWUgPSAnJ1xyXG4gICAgZWRpdEl0ZW1FcnJNc2cudGV4dENvbnRlbnQgPSAnJ1xyXG4gICAgZWRpdEl0ZW1JbnB1dC5zdHlsZS5ib3JkZXIgPSAnbm9uZSdcclxufVxyXG5cclxuY29uc3Qgc2hvd01lTWFuYWdlQ2F0ZWdvcnlQb3B1cCA9ICgpID0+IHtcclxuXHJcbiAgICBsZXQgY2F0ZWdvcnlPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3J5LW9wdGlvbicpXHJcblxyXG4gICAgY2F0ZWdvcnlPcHRpb25zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgY3JlYXRlTGkoaXRlbSlcclxuICAgIH0pXHJcblxyXG4gICAgbWFuYWdlQ2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJylcclxufVxyXG5cclxuY29uc3QgY3JlYXRlTGkgPSAoZWwpID0+IHtcclxuICAgIGNvbnN0IHRlbXBsYXRlID0gbWFuYWdlQ2F0ZWdvcnlUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKVxyXG4gICAgY29uc3QgbmV3TGkgPSB0ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0nKVxyXG4gICAgY29uc3QgdGV4dFBhcmFncmFwaCA9IG5ld0xpLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbS10ZXh0JylcclxuICAgIGNvbnN0IHRleHQgPSBlbC50ZXh0Q29udGVudFxyXG5cclxuICAgIGNvbnN0IGVkaXRCdG4gPSBuZXdMaS5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktZWRpdC1idXR0b24nKVxyXG4gICAgY29uc3QgZGVsZXRlQnRuID0gbmV3TGkucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LWRlbGV0ZS1idXR0b24nKVxyXG5cclxuICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlZGl0Q2F0ZWdvcnkpXHJcbiAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVDYXRlZ29yeSlcclxuXHJcbiAgICB0ZXh0UGFyYWdyYXBoLnRleHRDb250ZW50ID0gdGV4dFxyXG4gICAgbWFuYWdlQ2F0ZWdvcnlMaXN0LmFwcGVuZENoaWxkKG5ld0xpKVxyXG59XHJcblxyXG5jb25zdCBlZGl0Q2F0ZWdvcnkgPSAoZSkgPT4ge1xyXG4gICAgY29uc3QgYnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmNhdGVnb3J5LWVkaXQtYnV0dG9uJylcclxuICAgIGNvbnN0IGNsb3Nlc3RMaSA9IGJ0bi5jbG9zZXN0KCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0nKVxyXG4gICAgdGV4dFRvRWRpdCA9IGNsb3Nlc3RMaS5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0tdGV4dCcpXHJcbiAgICBjb25zdCB0ZXh0VmFsdWVMb3dlckNhc2UgPSB0ZXh0VG9FZGl0LnRleHRDb250ZW50LnRvTG93ZXJDYXNlKClcclxuXHJcbiAgICBsZXQgY2F0ZWdvcnlUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcnktdG9kby10ZXh0JylcclxuICAgIGxldCBhcnIgPSBbXVxyXG5cclxuICAgIGNhdGVnb3J5VGl0bGVzLmZvckVhY2godGl0bGUgPT4ge1xyXG4gICAgICAgIGFyci5wdXNoKHRpdGxlLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkpXHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChhcnIuaW5jbHVkZXModGV4dFZhbHVlTG93ZXJDYXNlKSkge1xyXG5cclxuICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8udGV4dENvbnRlbnQgPSAnWW91IGFyZSB1c2luZyB0aGlzIG9uZSEnXHJcbiAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgICAgIFxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgZWRpdENhdGVnb3J5SW5wdXQudmFsdWUgPSB0ZXh0VG9FZGl0LnRleHRDb250ZW50XHJcblxyXG4gICAgICAgIGVkaXRDYXRlZ29yeVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgICAgIG1hbmFnZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY29uc3QgY2hlY2tFZGl0Q2F0ZWdvcnlJbnB1dCA9ICgpID0+IHtcclxuXHJcbiAgICBsZXQgaW5wdXRWYWx1ZSA9IGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlXHJcbiAgICBsZXQgaW5wdXRWYWx1ZVRvTG93ZXJDYXNlID0gaW5wdXRWYWx1ZS50b0xvd2VyQ2FzZSgpXHJcbiAgICBsZXQgY2F0ZWdvcnlUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0tdGV4dCcpXHJcbiAgICBsZXQgYXJyID0gW11cclxuXHJcbiAgICBjYXRlZ29yeVRpdGxlcy5mb3JFYWNoKHRpdGxlID0+IHtcclxuICAgICAgICBhcnIucHVzaCh0aXRsZS50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gJycpIHtcclxuXHJcbiAgICAgICAgZWRpdENhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJ1BsZWFzZSwgd3JpdGUgc29tZXRoaW5nISdcclxuXHJcbiAgICB9IGVsc2UgaWYgKGFyci5pbmNsdWRlcyhpbnB1dFZhbHVlVG9Mb3dlckNhc2UpKSB7XHJcblxyXG4gICAgICAgIGVkaXRDYXRlZ29yeUVyck1zZy50ZXh0Q29udGVudCA9ICdQbGVhc2UsIHdyaXRlIG5ldyBjYXRlZ29yeSEnXHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgYWNjZXB0RWRpdENhdGVnb3J5SW5wdXQoKVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZW50ZXJLZXlFZGl0Q2F0ZWdvcnkgPSAoKSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICBjaGVja0VkaXRDYXRlZ29yeUlucHV0KClcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgYWNjZXB0RWRpdENhdGVnb3J5SW5wdXQgPSAoKSA9PiB7XHJcblxyXG4gICAgbGV0IHRleHRWYWx1ZSA9IHRleHRUb0VkaXQudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKVxyXG5cclxuICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuY2F0ZWdvcnktb3B0aW9uW3ZhbHVlID0gJHt0ZXh0VmFsdWV9XWApXHJcblxyXG4gICAgb3B0aW9uLnZhbHVlID0gZWRpdENhdGVnb3J5SW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKVxyXG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gZWRpdENhdGVnb3J5SW5wdXQudmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBlZGl0Q2F0ZWdvcnlJbnB1dC52YWx1ZS5zbGljZSgxKVxyXG5cclxuICAgIHRleHRUb0VkaXQudGV4dENvbnRlbnQgPSBlZGl0Q2F0ZWdvcnlJbnB1dC52YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLnNsaWNlKDEpXHJcbiAgICBlZGl0Q2F0ZWdvcnlJbnB1dC52YWx1ZSA9ICcnXHJcbiAgICBlZGl0Q2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnJ1xyXG4gICAgZWRpdENhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBtYW5hZ2VDYXRlZ29yeVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG59XHJcblxyXG5jb25zdCBjbG9zZUVkaXRDYXRlZ29yeVBvcHVwID0gKCkgPT4ge1xyXG4gICAgZWRpdENhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBtYW5hZ2VDYXRlZ29yeVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgZWRpdENhdGVnb3J5SW5wdXQudmFsdWUgPSAnJ1xyXG4gICAgZWRpdENhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJydcclxufVxyXG5cclxuY29uc3QgZGVsZXRlQ2F0ZWdvcnkgPSAoZSkgPT4ge1xyXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmNhdGVnb3J5LWRlbGV0ZS1idXR0b24nKVxyXG4gICAgY29uc3QgY2xvc2VzdExpID0gZGVsZXRlQnRuLmNsb3Nlc3QoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbScpXHJcbiAgICBjb25zdCBwYXJhZ3JhcGggPSBjbG9zZXN0TGkucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMtbGlzdC1pdGVtLXRleHQnKVxyXG4gICAgY29uc3QgcGFyYWdyYXBoVmFsdWUgPSBwYXJhZ3JhcGgudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKVxyXG5cclxuICAgIGNvbnN0IGl0ZW1zVGl0bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3J5LXRvZG8tdGV4dCcpXHJcblxyXG4gICAgbGV0IGNhdGVnb3J5T3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yeS1vcHRpb24nKVxyXG4gICAgbGV0IGFyciA9IFtdXHJcblxyXG5cclxuICAgIGlmIChpdGVtc1RpdGxlcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgIGl0ZW1zVGl0bGVzLmZvckVhY2godGl0bGUgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGl0bGVUb0xvd2VyID0gdGl0bGUudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICBhcnIucHVzaCh0aXRsZVRvTG93ZXIpXHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmIChhcnIuaW5jbHVkZXMocGFyYWdyYXBoVmFsdWUpKSB7XHJcblxyXG4gICAgICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8udGV4dENvbnRlbnQgPSAnWW91IGFyZSB1c2luZyB0aGlzIGNhdGVnb3J5ISdcclxuICAgICAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgY2F0ZWdvcnlPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnlPcHRpb25zLmxlbmd0aCA+IDEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi52YWx1ZSA9PT0gcGFyYWdyYXBoVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdExpLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5yZW1vdmUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZUNhdGVnb3J5SW5mby50ZXh0Q29udGVudCA9ICdZb3UgbmVlZCBhdCBsZWFzdCBvbmUgY2F0ZWdvcnkhJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgY2F0ZWdvcnlPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeU9wdGlvbnMubGVuZ3RoID4gMSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24udmFsdWUgPT09IHBhcmFncmFwaFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdExpLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1hbmFnZUNhdGVnb3J5SW5mby50ZXh0Q29udGVudCA9ICdZb3UgbmVlZCBhdCBsZWFzdCBvbmUgY2F0ZWdvcnkhJ1xyXG4gICAgICAgICAgICAgICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgY2xvc2VDYXRlZ29yeVBvcHVwID0gKCkgPT4ge1xyXG5cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0nKSkge1xyXG5cclxuICAgICAgICBsZXQgYWxsTGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0nKVxyXG5cclxuICAgICAgICBhbGxMaS5mb3JFYWNoKGxpID0+IHtcclxuICAgICAgICAgICAgbGkucmVtb3ZlKClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG1hbmFnZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbn1cclxuXHJcbmNvbnN0IHNob3dNZWNyZWF0ZUNhdGVnb3J5UG9wdXAgPSAoKSA9PiB7XHJcbiAgICBjcmVhdGVDYXRlZ29yeVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgbWFuYWdlQ2F0ZWdvcnlJbmZvLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktYmxvY2snKVxyXG4gICAgY2xvc2VDYXRlZ29yeVBvcHVwKClcclxufVxyXG5cclxuY29uc3QgYWNjZXB0TmV3Q2F0ZWdvcnkgPSAoKSA9PiB7XHJcbiAgICBsZXQgbmV3Q2F0ZWdvcnlPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKVxyXG4gICAgbmV3Q2F0ZWdvcnlPcHRpb24udmFsdWUgPSBjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKClcclxuICAgIG5ld0NhdGVnb3J5T3B0aW9uLnRleHRDb250ZW50ID0gY3JlYXRlQ2F0ZWdvcnlJbnB1dC52YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUuc2xpY2UoMSlcclxuICAgIG5ld0NhdGVnb3J5T3B0aW9uLmNsYXNzTGlzdC5hZGQoJ2NhdGVnb3J5LW9wdGlvbicpXHJcblxyXG4gICAgY2F0ZWdvcnlTZWxlY3QuYXBwZW5kKG5ld0NhdGVnb3J5T3B0aW9uKVxyXG5cclxuICAgIGNyZWF0ZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlID0gJydcclxuICAgIGNyZWF0ZUNhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJydcclxufVxyXG5cclxuY29uc3QgY2hlY2tDYXRlZ29yeUlucHV0ID0gKCkgPT4ge1xyXG5cclxuICAgIGxldCBjYXRlZ29yeUlucHV0VmFsdWUgPSBjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlXHJcbiAgICBsZXQgY2F0ZWdvcnlJbnB1dFRvTG93ZXJDYXNlID0gY2F0ZWdvcnlJbnB1dFZhbHVlLnRvTG93ZXJDYXNlKClcclxuICAgIGxldCBjYXRlZ29yeU9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcnktb3B0aW9uJylcclxuICAgIGxldCBhcnIgPSBbXVxyXG5cclxuXHJcbiAgICBjYXRlZ29yeU9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xyXG4gICAgICAgIGFyci5wdXNoKG9wdGlvbi52YWx1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUgPT09ICcnKSB7XHJcblxyXG4gICAgICAgIGNyZWF0ZUNhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJ1BsZWFzZSwgd3JpdGUgc29tZXRoaW5nISdcclxuXHJcbiAgICB9IGVsc2UgaWYgKGFyci5pbmNsdWRlcyhjYXRlZ29yeUlucHV0VG9Mb3dlckNhc2UpKSB7XHJcblxyXG4gICAgICAgIGNyZWF0ZUNhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJ1lvdSBhbHJlYWR5IGhhdmUgdGhpcyBvbmUhJ1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIGFjY2VwdE5ld0NhdGVnb3J5KClcclxuICAgICAgICBzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwKClcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGVudGVyS2V5QWRkQ2F0ZWdvcnkgPSAoKSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICBjaGVja0NhdGVnb3J5SW5wdXQoKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjYW5jZWxOZXdDYXRlZ29yeSA9ICgpID0+IHtcclxuICAgIGNyZWF0ZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpXHJcbiAgICBjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlID0gJydcclxuICAgIGNyZWF0ZUNhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJydcclxuICAgIHNob3dNZU1hbmFnZUNhdGVnb3J5UG9wdXAoKVxyXG59XHJcblxyXG5jb25zdCBjaGVja0lmQW55SXRlbUxlZnQgPSAoKSA9PiB7XHJcbiAgICBpZiAoYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2MtYm94JykpIHtcclxuICAgICAgICBhbGVydEluZm8udGV4dENvbnRlbnQgPSAnJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydEluZm8udGV4dENvbnRlbnQgPSAnRm9yIG5vdyB0aGVyZSBpcyBub3RoaW5nIHRvIGRvLidcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgdG9nZ2xlQWNjb3JkaW9uID0gKGUpID0+IHtcclxuICAgIGNvbnN0IGFjY29yZGlvbkJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5jYXRlZ29yeS10b2RvLXRpdGxlLWJ0bicpXHJcbiAgICBjb25zdCBjYXRlZ29yeUFycm93ID0gYWNjb3JkaW9uQnRuLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS1hcnJvdycpXHJcbiAgICBjb25zdCBhY2NvcmRpb25Cb3ggPSBhY2NvcmRpb25CdG4ubmV4dEVsZW1lbnRTaWJsaW5nXHJcblxyXG4gICAgYWNjb3JkaW9uQm94LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUnKVxyXG4gICAgY2F0ZWdvcnlBcnJvdy5jbGFzc0xpc3QudG9nZ2xlKCdyb3RhdGUnKVxyXG59XHJcblxyXG5cclxuYWRkSXRlbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZEl0ZW0pXHJcbnRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGVudGVyS2V5QWRkSXRlbSlcclxuXHJcbmVkaXRJdGVtQnRuQWNjZXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tFZGl0SXRlbUlucHV0KVxyXG5lZGl0SXRlbUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZW50ZXJLZXlFZGl0SXRlbSlcclxuZWRpdEl0ZW1CdG5DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYW5jZWxFZGl0ZWRUZXh0KVxyXG5cclxubWFuYWdlQ2F0ZWdvcnlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwKVxyXG5tYW5hZ2VDYXRlZ29yeUNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VDYXRlZ29yeVBvcHVwKVxyXG5cclxuZWRpdENhdGVnb3J5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlbnRlcktleUVkaXRDYXRlZ29yeSlcclxuZWRpdENhdGVnb3J5QWNjZXB0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tFZGl0Q2F0ZWdvcnlJbnB1dClcclxuZWRpdENhdGVnb3J5Q2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VFZGl0Q2F0ZWdvcnlQb3B1cClcclxuXHJcbmNyZWF0ZUNhdGVnb3J5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd01lY3JlYXRlQ2F0ZWdvcnlQb3B1cClcclxuY3JlYXRlQ2F0ZWdvcnlCdG5BY2NlcHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0NhdGVnb3J5SW5wdXQpXHJcbmNyZWF0ZUNhdGVnb3J5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlbnRlcktleUFkZENhdGVnb3J5KVxyXG5jcmVhdGVDYXRlZ29yeUJ0bkNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbE5ld0NhdGVnb3J5KSJdfQ==
